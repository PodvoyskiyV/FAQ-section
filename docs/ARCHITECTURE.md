# Архитектура проекта FAQ Component

## Общая структура

Проект построен на принципах:
- **Модульность** - четкое разделение HTML, CSS, JS
- **Производительность** - минимум зависимостей, оптимизированный код
- **Доступность** - семантическая разметка, ARIA атрибуты
- **Адаптивность** - Mobile-first подход с медиа-запросами

## Файловая структура

```
KapitalBank/
├── index.html              # Разметка компонента
├── styles.css              # Все стили (Desktop + Mobile)
├── script.js               # Логика взаимодействия
├── README.md              # Основная документация
├── DOCUMENTATION.md        # Детальная документация
├── COMPONENT_SPEC.md      # Спецификация компонентов
├── DESIGN_SYSTEM.md       # Дизайн-система
├── ARCHITECTURE.md        # Этот файл
└── .gitignore            # Игнорируемые файлы
```

## CSS Архитектура

### Организация стилей

1. **Reset & Base** (строки 1-24)
   - Сброс стилей
   - Базовые настройки body

2. **Layout** (строки 26-52)
   - Контейнеры
   - Секции

3. **Components** (строки 54-325)
   - Основные вопросы
   - Подвопросы
   - Иконки
   - Ответы

4. **Animations** (строки 327-341)
   - Keyframes
   - Анимации

5. **Responsive** (строки 343+)
   - Медиа-запросы для Mobile

### Принципы организации

- **Объединение общих стилей** - `.faq-question, .faq-subquestion`
- **Каскадность** - базовые стили → специфичные
- **Мобильные стили** - переопределение только необходимых свойств

### Оптимизации

- Минимум дублирования через группировку селекторов
- Использование CSS Grid для плавных анимаций
- Transition только для необходимых свойств

## JavaScript Архитектура

### Структура кода

```javascript
DOMContentLoaded
  ├── Инициализация элементов
  ├── Функция updateBorders() - управление границами
  ├── Функция handleQuestionClick() - универсальный обработчик
  ├── Функция handleKeydown() - обработка клавиатуры
  └── Назначение обработчиков событий
```

### Принципы

1. **Универсальность**
   - Одна функция для основных вопросов и подвопросов
   - Параметризация через аргументы

2. **Производительность**
   - Минимум DOM операций
   - Кэширование селекторов
   - Event delegation где возможно

3. **Читаемость**
   - Понятные имена функций
   - Комментарии для сложной логики

### Обработка событий

- **Click:** Переключение состояния
- **Keydown:** Поддержка клавиатуры (Enter/Space)
- **Mouseenter/Mouseleave:** Обновление границ
- **StopPropagation:** Для подвопросов (чтобы не закрывать основной)

## HTML Структура

### Семантика

- `<section>` для секции FAQ
- `<button>` для интерактивных элементов
- `<div>` для контейнеров контента
- ARIA атрибуты для доступности

### Иерархия

```
section.faq-section
  └── h2.faq-title
  └── div.faq-list
      └── div.faq-item (множество)
          ├── button.faq-question
          └── div.faq-answer
              └── div.faq-subquestions (опционально)
```

## Состояния компонентов

### Управление состояниями

- **CSS классы:** `.active` для открытых элементов
- **ARIA атрибуты:** `aria-expanded="true/false"`
- **CSS Grid:** `grid-template-rows: 0fr/1fr` для анимации

### Синхронизация

- JavaScript управляет классами и ARIA
- CSS реагирует на классы для визуального состояния
- Анимации через CSS transitions

## Производительность

### Оптимизации CSS

- Объединенные селекторы (меньше правил)
- Минимум переопределений в медиа-запросах
- Использование transform для анимаций (GPU ускорение)

### Оптимизации JavaScript

- Один проход по элементам при инициализации
- Кэширование селекторов
- Минимум манипуляций с DOM

### Размеры файлов

- CSS: ~356 строк (оптимизировано с 467)
- JavaScript: ~62 строки (оптимизировано с 85)
- HTML: ~233 строки

## Расширяемость

### Добавление новых вопросов

Просто добавьте новый `.faq-item` в HTML:

```html
<div class="faq-item">
    <button class="faq-question" aria-expanded="false">
        <span class="question-text">Новый вопрос</span>
        <span class="faq-icon">...</span>
    </button>
    <div class="faq-answer">
        <p>Ответ на вопрос</p>
    </div>
</div>
```

### Добавление подвопросов

Вложите `.faq-subquestions` в `.faq-answer`:

```html
<div class="faq-answer">
    <div class="faq-subquestions">
        <div class="faq-subitem">...</div>
    </div>
</div>
```

### Кастомизация стилей

Все стили централизованы в `styles.css`. Основные точки кастомизации:

- Цвета: в начале файла
- Размеры: в соответствующих секциях
- Анимации: transition значения

## Зависимости

### Внешние

- **Google Fonts:** Roboto (подключение через CDN)
  - Используется: `preconnect` для оптимизации загрузки

### Внутренние

- Нет зависимостей
- Vanilla JavaScript
- Нативный CSS

## Браузерная поддержка

### Поддерживаемые браузеры

- Chrome/Edge (последние 2 версии)
- Firefox (последние 2 версии)
- Safari (последние 2 версии)

### Используемые технологии

- CSS Grid (для анимаций)
- CSS :has() селектор (для границ)
- Flexbox
- CSS Transitions
- ES6+ JavaScript

### Fallbacks

- Для старых браузеров может потребоваться полифиллы для:
  - CSS Grid
  - :has() селектор

## Безопасность

- Нет внешних скриптов (кроме Google Fonts)
- Нет пользовательского ввода
- Статический контент

## Тестирование

### Ручное тестирование

1. Открытие/закрытие вопросов
2. Открытие/закрытие подвопросов
3. Hover эффекты
4. Навигация с клавиатуры
5. Адаптивность на разных экранах

### Чек-лист

- [ ] Все вопросы открываются/закрываются
- [ ] Подвопросы работают корректно
- [ ] Анимации плавные
- [ ] Границы скрываются правильно
- [ ] Клавиатурная навигация работает
- [ ] Адаптивность на всех breakpoints
- [ ] Нет визуальных багов

---

*Версия архитектуры: 1.0*

