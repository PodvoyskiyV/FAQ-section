# Архитектура проекта FAQ Component - KapitalBank

## Общая структура

Проект построен на принципах:
- **Модульность** - четкое разделение HTML, CSS, JS
- **Производительность** - минимум зависимостей, оптимизированный код
- **Доступность** - семантическая разметка, ARIA атрибуты
- **Адаптивность** - Desktop-first с медиа-запросами для Mobile

## Файловая структура

```
KapitalBank/
├── index.html              # Разметка компонента (точка входа)
├── src/                    # Исходный код
│   ├── styles.css         # Все стили (Desktop + Mobile)
│   └── script.js          # Логика взаимодействия
├── docs/                   # Документация
│   ├── ARCHITECTURE.md    # Этот файл
│   ├── COMPONENT_SPEC.md  # Спецификация компонентов
│   ├── DESIGN_SYSTEM.md   # Дизайн-система
│   ├── DOCUMENTATION.md   # Детальная документация
│   └── FIGMA_SPEC.md     # Спецификация для Figma
├── figma-import.json      # JSON для импорта в Figma
├── README.md              # Основная документация
├── LICENSE                # Лицензия
└── .gitignore            # Игнорируемые файлы
```

## CSS Архитектура

### Организация стилей

1. **Reset & Base**
   - Сброс стилей (* { margin: 0; padding: 0; })
   - Базовые настройки html, body
   - Настройки body (шрифт, фон, скролл)

2. **Layout**
   - Контейнеры (динамическая ширина 100%)
   - Секции (растягиваются на всю ширину экрана)
   - Списки (flexbox layout)

3. **Components**
   - Основные вопросы (.faq-item, .faq-question)
   - Подвопросы (.faq-subitem, .faq-subquestion)
   - Иконки (.faq-icon)
   - Ответы (.faq-answer, .faq-subanswer)
   - Границы (::after псевдоэлементы)

4. **Animations**
   - Keyframes (fadeIn)
   - Transitions (для всех анимаций)

5. **Responsive**
   - Медиа-запросы для Mobile (≤768px)
   - Медиа-запросы для Small Mobile (≤480px)

### Принципы организации

- **Объединение общих стилей** - группировка `.faq-question, .faq-subquestion`
- **Каскадность** - базовые стили → специфичные → состояния
- **Мобильные стили** - переопределение только необходимых свойств
- **Оптимизация** - минимум дублирования через группировку селекторов

### Технические решения

**CSS Grid для анимаций:**
- Использование `grid-template-rows: 0fr / 1fr` для плавного раскрытия
- Более производительно, чем max-height

**Псевдоэлементы для границ:**
- `::after` для создания границ с отступами
- Управление через класс `.hide-border`

**Transition оптимизация:**
- Только для необходимых свойств
- Разные длительности для разных элементов

## JavaScript Архитектура

### Структура кода

```javascript
DOMContentLoaded
  ├── Инициализация элементов (querySelectorAll)
  ├── updateBorders() - управление видимостью границ
  ├── handleQuestionClick() - универсальный обработчик кликов
  ├── handleKeydown() - обработка клавиатуры
  └── Назначение обработчиков событий
```

### Функции

**updateBorders()**
- Управление классом `.hide-border` для всех элементов
- Проверка состояния следующего элемента (active/hover)
- Принудительное обновление через requestAnimationFrame
- Поддержка touch-устройств (отключение hover)

**handleQuestionClick()**
- Универсальная функция для основных вопросов и подвопросов
- Переключение класса `.active`
- Обновление атрибута `aria-expanded`
- Вызов `updateBorders()` с задержками для Mobile

**handleKeydown()**
- Обработка Enter и Space
- Предотвращение стандартного поведения
- Вызов click() для унификации логики

### Оптимизации

- Универсальные функции вместо дублирования
- Использование `closest()` для поиска контейнера
- `stopPropagation()` для подвопросов
- Множественные вызовы `updateBorders()` для гарантированного обновления в Mobile

## Производительность

### CSS

- Минимум дублирования через группировку селекторов
- Использование CSS Grid вместо max-height для анимаций
- Transition только для необходимых свойств
- Оптимизированные медиа-запросы

### JavaScript

- Минимум DOM-запросов (кэширование элементов)
- Универсальные функции
- Эффективное управление классами
- Использование requestAnimationFrame для синхронизации

### Загрузка

- Только Google Fonts как внешняя зависимость
- Локальные файлы CSS и JS
- Минимум HTTP-запросов

## Доступность

### ARIA

- `aria-expanded` для индикации состояния
- Семантические HTML элементы

### Клавиатура

- Полная поддержка навигации
- Enter и Space для активации

### Семантика

- Использование `<button>` для интерактивных элементов
- Правильная структура заголовков
- Логическая иерархия

## Адаптивность

### Breakpoints

- Desktop: динамическая ширина (100%)
- Tablet: 768px - 1200px (переходная зона)
- Mobile: 480px - 768px
- Small Mobile: < 480px

### Подход

- Desktop-first (базовые стили для Desktop)
- Медиа-запросы для переопределения на Mobile
- Специальные правила для границ в Mobile

## Расширяемость

### Добавление новых вопросов

- Простое добавление HTML-структуры
- Автоматическая работа всех функций
- Поддержка вложенных подвопросов

### Кастомизация

- Легкое изменение цветов через CSS переменные (при необходимости)
- Настройка анимаций через transition
- Изменение размеров через медиа-запросы

## Поддержка браузеров

- Chrome (последние версии)
- Firefox (последние версии)
- Safari (последние версии)
- Edge (последние версии)
- Мобильные браузеры (iOS Safari, Chrome Mobile)

---

*Версия архитектуры: 1.0*
